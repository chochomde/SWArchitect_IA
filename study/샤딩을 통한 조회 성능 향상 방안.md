



### 설계 전략 제목: 샤딩을 통한 조회 성능 향상 방안



### 질문

```
조회 성능 향상을 위해 추가로 설계 전략을 고민 중입니다. 샤딩을 사용해서 데이터를 분산해서 성능 향상을 하고 싶습니다. 적절한 설계 전략 제목과 설계 전략 선정 이유를 알려주세요. 그리고 설계 전략을 상세히 알려주세요. 설계 전략은 비교 대상이 하나 이상 꼭 있어야 합니다.
```



#### 설계 전략 선정 이유

대규모 데이터셋을 처리하고 조회 성능을 극대화하기 위해 데이터베이스 샤딩을 도입합니다. 샤딩은 데이터를 여러 노드로 분산하여 병렬 처리가 가능하게 하며, 데이터베이스 부하를 분산시켜 성능을 향상시킵니다. 이를 통해 시스템은 더 많은 요청을 처리할 수 있고, 데이터 접근 시간이 단축됩니다.

### 설계 전략 상세

#### 비교 대상 1: 수평 샤딩 (Horizontal Sharding)

**설계 전략:** 데이터를 특정 키를 기준으로 여러 노드에 분산 저장하여 조회 성능을 향상시킵니다.

**선정 이유:** 수평 샤딩은 데이터를 균등하게 분산하여, 각 노드의 부하를 줄이고 병렬 처리를 가능하게 합니다. 이를 통해 조회 성능을 극대화할 수 있습니다.

**구현 방법:**

1. **샤드 키 선정:** 데이터를 균등하게 분산할 수 있는 적절한 샤드 키를 선정합니다. 예를 들어, 사용자 ID, 주문 ID 등을 사용할 수 있습니다.
2. **데이터 분할:** 샤드 키를 기준으로 데이터를 여러 노드에 분할 저장합니다.
3. **샤드 매핑:** 샤드 키와 노드 간의 매핑을 관리하는 샤드 매핑 테이블을 생성합니다.
4. **조회 쿼리 처리:** 클라이언트 요청이 들어오면, 샤드 키를 기반으로 적절한 노드에 쿼리를 전달하고 결과를 병합합니다.
5. **장애 처리:** 특정 노드에 장애가 발생하면, 샤드 매핑 테이블을 업데이트하여 데이터 접근을 재구성합니다.

**장점:**

- **부하 분산:** 데이터와 요청을 여러 노드에 분산하여 각 노드의 부하를 줄일 수 있습니다.
- **확장성:** 새로운 노드를 추가하여 수평적으로 확장할 수 있습니다.
- **병렬 처리:** 여러 노드에서 병렬로 데이터를 처리할 수 있어 성능이 향상됩니다.

**단점:**

- **복잡성:** 샤딩 전략을 구현하고 관리하는 것이 복잡할 수 있습니다.
- **데이터 재분배:** 샤드 키 변경 시 데이터 재분배가 필요할 수 있으며, 이는 시스템 부하를 증가시킬 수 있습니다.

#### 비교 대상 2: 수직 샤딩 (Vertical Sharding)

**설계 전략:** 테이블 단위로 데이터를 분산 저장하여 조회 성능을 향상시킵니다.

**선정 이유:** 수직 샤딩은 서로 다른 테이블을 별도의 노드에 분산 저장하여, 특정 테이블에 대한 조회 성능을 향상시킬 수 있습니다.

**구현 방법:**

1. **테이블 분할:** 관련된 데이터 테이블을 식별하고, 각 테이블을 별도의 노드에 분산 저장합니다.
2. **데이터 분산:** 각 테이블을 별도의 데이터베이스 인스턴스에 저장합니다.
3. **조회 쿼리 처리:** 클라이언트 요청이 들어오면, 요청된 테이블이 저장된 노드에 쿼리를 전달하고 결과를 반환합니다.
4. **장애 처리:** 특정 노드에 장애가 발생하면, 해당 노드의 테이블을 다른 노드로 마이그레이션합니다.

**장점:**

- **단순성:** 테이블 단위로 분산 저장하므로 관리가 비교적 단순합니다.
- **특정 테이블 성능 향상:** 특정 테이블의 조회 성능을 향상시킬 수 있습니다.
- **관리 용이:** 각 노드가 별도의 테이블을 관리하므로 노드 간의 데이터 충돌이 없습니다.

**단점:**

- **확장성 제한:** 수평 샤딩에 비해 확장성이 제한될 수 있습니다.
- **부하 불균형:** 특정 테이블에 부하가 집중될 경우, 노드 간 부하 불균형이 발생할 수 있습니다.
- **복잡한 쿼리 처리:** 여러 테이블에 걸친 복잡한 쿼리를 처리하는 데 제약이 있을 수 있습니다.

### 결론

**수평 샤딩**과 **수직 샤딩**은 각각의 장단점을 가지고 있으며, 시스템의 요구사항과 데이터 특성에 맞게 선택할 수 있습니다.

- **수평 샤딩**은 데이터를 균등하게 분산하여 각 노드의 부하를 줄이고 병렬 처리를 가능하게 하므로, 대규모 데이터셋에서 조회 성능을 극대화할 수 있습니다. 그러나 구현과 관리가 복잡할 수 있습니다.
- **수직 샤딩**은 테이블 단위로 데이터를 분산 저장하여 관리가 비교적 단순하고, 특정 테이블의 성능을 향상시킬 수 있습니다. 그러나 확장성과 부하 균형 면에서 제약이 있을 수 있습니다.

시스템 요구사항에 맞춰 적절한 샤딩 전략을 선택하는 것이 중요합니다. 예를 들어, 데이터가 균등하게 분산되고 병렬 처리가 중요한 경우 수평 샤딩을, 특정 테이블의 조회 성능을 높이고 관리의 단순함이 중요한 경우 수직 샤딩을 선택할 수 있습니다.